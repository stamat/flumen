/*!
 * Flumen PACKAGED v1.0.2
 *
 * License MIT
 *
 * http://stamat.github.io/flumen
 * Copyright 2017 Stamat
 */

!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var r=t||window.event,l=a.call(arguments,1),h=0,u=0,d=0,f=0,v=0,m=0;if(t=e.event.fix(r),t.type="mousewheel","detail"in r&&(d=r.detail*-1),"wheelDelta"in r&&(d=r.wheelDelta),"wheelDeltaY"in r&&(d=r.wheelDeltaY),"wheelDeltaX"in r&&(u=r.wheelDeltaX*-1),"axis"in r&&r.axis===r.HORIZONTAL_AXIS&&(u=d*-1,d=0),h=0===d?u:d,"deltaY"in r&&(d=r.deltaY*-1,h=d),"deltaX"in r&&(u=r.deltaX,0===d&&(h=u*-1)),0!==d||0!==u){if(1===r.deltaMode){var p=e.data(this,"mousewheel-line-height");h*=p,d*=p,u*=p}else if(2===r.deltaMode){var g=e.data(this,"mousewheel-page-height");h*=g,d*=g,u*=g}if(f=Math.max(Math.abs(d),Math.abs(u)),(!o||f<o)&&(o=f,s(r,f)&&(o/=40)),s(r,f)&&(h/=40,u/=40,d/=40),h=Math[h>=1?"floor":"ceil"](h/o),u=Math[u>=1?"floor":"ceil"](u/o),d=Math[d>=1?"floor":"ceil"](d/o),c.settings.normalizeOffset&&this.getBoundingClientRect){var w=this.getBoundingClientRect();v=t.clientX-w.left,m=t.clientY-w.top}return t.deltaX=u,t.deltaY=d,t.deltaFactor=o,t.offsetX=v,t.offsetY=m,t.deltaMode=0,l.unshift(t,h,u,d),n&&clearTimeout(n),n=setTimeout(i,200),(e.event.dispatch||e.event.handle).apply(this,l)}}function i(){o=null}function s(e,t){return c.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120===0}var n,o,r=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],l="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],a=Array.prototype.slice;if(e.event.fixHooks)for(var h=r.length;h;)e.event.fixHooks[r[--h]]=e.event.mouseHooks;var c=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var i=l.length;i;)this.addEventListener(l[--i],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",c.getLineHeight(this)),e.data(this,"mousewheel-page-height",c.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var i=l.length;i;)this.removeEventListener(l[--i],t,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var i=e(t),s=i["offsetParent"in e.fn?"offsetParent":"parent"]();return s.length||(s=e("body")),parseInt(s.css("fontSize"),10)||parseInt(i.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),function(e){"use strict";var t="kinetic-active";window.requestAnimationFrame||(window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)}}()),e.support=e.support||{},e.extend(e.support,{touch:"ontouchend"in document});var i=function(){return!1},s=function(t,i){return this.settings=i,this.el=t,this.$el=e(t),this._initElements(),this};s.DATA_KEY="kinetic",s.DEFAULTS={cursor:"move",decelerate:!0,triggerHardware:!1,threshold:0,y:!0,x:!0,slowdown:.9,maxvelocity:40,throttleFPS:60,movingClass:{up:"kinetic-moving-up",down:"kinetic-moving-down",left:"kinetic-moving-left",right:"kinetic-moving-right"},deceleratingClass:{up:"kinetic-decelerating-up",down:"kinetic-decelerating-down",left:"kinetic-decelerating-left",right:"kinetic-decelerating-right"}},s.prototype.start=function(t){this.settings=e.extend(this.settings,t),this.velocity=t.velocity||this.velocity,this.velocityY=t.velocityY||this.velocityY,this.settings.decelerate=!1,this._move()},s.prototype.end=function(){this.settings.decelerate=!0},s.prototype.stop=function(){this.velocity=0,this.velocityY=0,this.settings.decelerate=!0,e.isFunction(this.settings.stopped)&&this.settings.stopped.call(this)},s.prototype.detach=function(){this._detachListeners(),this.$el.removeClass(t).css("cursor","")},s.prototype.attach=function(){this.$el.hasClass(t)||(this._attachListeners(this.$el),this.$el.addClass(t).css("cursor",this.settings.cursor))},s.prototype._initElements=function(){this.$el.addClass(t),e.extend(this,{xpos:null,prevXPos:!1,ypos:null,prevYPos:!1,mouseDown:!1,throttleTimeout:1e3/this.settings.throttleFPS,lastMove:null,elementFocused:null}),this.velocity=0,this.velocityY=0,e(document).mouseup(e.proxy(this._resetMouse,this)).click(e.proxy(this._resetMouse,this)),this._initEvents(),this.$el.css("cursor",this.settings.cursor),this.settings.triggerHardware&&this.$el.css({"-webkit-transform":"translate3d(0,0,0)","-webkit-perspective":"1000","-webkit-backface-visibility":"hidden"})},s.prototype._initEvents=function(){var t=this;this.settings.events={touchStart:function(e){var i;t._useTarget(e.target,e)&&(i=e.originalEvent.touches[0],t.threshold=t._threshold(e.target,e),t._start(i.clientX,i.clientY),e.stopPropagation())},touchMove:function(e){var i;t.mouseDown&&(i=e.originalEvent.touches[0],t._inputmove(i.clientX,i.clientY),e.preventDefault&&e.preventDefault())},inputDown:function(e){t._useTarget(e.target,e)&&(t.threshold=t._threshold(e.target,e),t._start(e.clientX,e.clientY),t.elementFocused=e.target,"IMG"===e.target.nodeName&&e.preventDefault(),e.stopPropagation())},inputEnd:function(e){t._useTarget(e.target,e)&&(t._end(),t.elementFocused=null,e.preventDefault&&e.preventDefault())},inputMove:function(e){t.mouseDown&&(t._inputmove(e.clientX,e.clientY),e.preventDefault&&e.preventDefault())},scroll:function(i){e.isFunction(t.settings.moved)&&t.settings.moved.call(t,t.settings),i.preventDefault&&i.preventDefault()},inputClick:function(e){if(Math.abs(t.velocity)>0)return e.preventDefault(),!1},dragStart:function(e){if(t._useTarget(e.target,e)&&t.elementFocused)return!1}},this._attachListeners(this.$el,this.settings)},s.prototype._inputmove=function(t,i){var s=this.$el;this.el;if((!this.lastMove||new Date>new Date(this.lastMove.getTime()+this.throttleTimeout))&&(this.lastMove=new Date,this.mouseDown&&(this.xpos||this.ypos))){var n=t-this.xpos,o=i-this.ypos;if(this.threshold>0){var r=Math.sqrt(n*n+o*o);if(this.threshold>r)return;this.threshold=0}this.elementFocused&&(e(this.elementFocused).blur(),this.elementFocused=null,s.focus()),this.settings.decelerate=!1,this.velocity=this.velocityY=0;var l=this.scrollLeft(),a=this.scrollTop();this.scrollLeft(this.settings.x?l-n:l),this.scrollTop(this.settings.y?a-o:a),this.prevXPos=this.xpos,this.prevYPos=this.ypos,this.xpos=t,this.ypos=i,this._calculateVelocities(),this._setMoveClasses(this.settings.movingClass),e.isFunction(this.settings.moved)&&this.settings.moved.call(this,this.settings)}},s.prototype._calculateVelocities=function(){this.velocity=this._capVelocity(this.prevXPos-this.xpos,this.settings.maxvelocity),this.velocityY=this._capVelocity(this.prevYPos-this.ypos,this.settings.maxvelocity)},s.prototype._end=function(){this.xpos&&this.prevXPos&&this.settings.decelerate===!1&&(this.settings.decelerate=!0,this._calculateVelocities(),this.xpos=this.prevXPos=this.mouseDown=!1,this._move())},s.prototype._useTarget=function(t,i){return!e.isFunction(this.settings.filterTarget)||this.settings.filterTarget.call(this,t,i)!==!1},s.prototype._threshold=function(t,i){return e.isFunction(this.settings.threshold)?this.settings.threshold.call(this,t,i):this.settings.threshold},s.prototype._start=function(e,t){this.mouseDown=!0,this.velocity=this.prevXPos=0,this.velocityY=this.prevYPos=0,this.xpos=e,this.ypos=t},s.prototype._resetMouse=function(){this.xpos=!1,this.ypos=!1,this.mouseDown=!1},s.prototype._decelerateVelocity=function(e,t){return 0===Math.floor(Math.abs(e))?0:e*t},s.prototype._capVelocity=function(e,t){var i=e;return e>0?e>t&&(i=t):e<0-t&&(i=0-t),i},s.prototype._setMoveClasses=function(e){var t=this.settings,i=this.$el;i.removeClass(t.movingClass.up).removeClass(t.movingClass.down).removeClass(t.movingClass.left).removeClass(t.movingClass.right).removeClass(t.deceleratingClass.up).removeClass(t.deceleratingClass.down).removeClass(t.deceleratingClass.left).removeClass(t.deceleratingClass.right),this.velocity>0&&i.addClass(e.right),this.velocity<0&&i.addClass(e.left),this.velocityY>0&&i.addClass(e.down),this.velocityY<0&&i.addClass(e.up)},s.prototype._move=function(){var t=(this.$el,this.el),i=this,s=i.settings;s.x&&t.scrollWidth>0?(this.scrollLeft(this.scrollLeft()+this.velocity),Math.abs(this.velocity)>0&&(this.velocity=s.decelerate?i._decelerateVelocity(this.velocity,s.slowdown):this.velocity)):this.velocity=0,s.y&&t.scrollHeight>0?(this.scrollTop(this.scrollTop()+this.velocityY),Math.abs(this.velocityY)>0&&(this.velocityY=s.decelerate?i._decelerateVelocity(this.velocityY,s.slowdown):this.velocityY)):this.velocityY=0,i._setMoveClasses(s.deceleratingClass),e.isFunction(s.moved)&&s.moved.call(this,s),Math.abs(this.velocity)>0||Math.abs(this.velocityY)>0?this.moving||(this.moving=!0,window.requestAnimationFrame(function(){i.moving=!1,i._move()})):i.stop()},s.prototype._getScroller=function(){var t=this.$el;return(this.$el.is("body")||this.$el.is("html"))&&(t=e(window)),t},s.prototype.scrollLeft=function(e){var t=this._getScroller();return"number"!=typeof e?t.scrollLeft():(t.scrollLeft(e),void(this.settings.scrollLeft=e))},s.prototype.scrollTop=function(e){var t=this._getScroller();return"number"!=typeof e?t.scrollTop():(t.scrollTop(e),void(this.settings.scrollTop=e))},s.prototype._attachListeners=function(){var t=this.$el,s=this.settings;e.support.touch&&t.bind("touchstart",s.events.touchStart).bind("touchend",s.events.inputEnd).bind("touchmove",s.events.touchMove),t.mousedown(s.events.inputDown).mouseup(s.events.inputEnd).mousemove(s.events.inputMove),t.click(s.events.inputClick).scroll(s.events.scroll).bind("selectstart",i).bind("dragstart",s.events.dragStart)},s.prototype._detachListeners=function(){var t=this.$el,s=this.settings;e.support.touch&&t.unbind("touchstart",s.events.touchStart).unbind("touchend",s.events.inputEnd).unbind("touchmove",s.events.touchMove),t.unbind("mousedown",s.events.inputDown).unbind("mouseup",s.events.inputEnd).unbind("mousemove",s.events.inputMove),t.unbind("click",s.events.inputClick).unbind("scroll",s.events.scroll).unbind("selectstart",i).unbind("dragstart",s.events.dragStart)},e.Kinetic=s,e.fn.kinetic=function(t,i){return this.each(function(){var n=e(this),o=n.data(s.DATA_KEY),r=e.extend({},s.DEFAULTS,n.data(),"object"==typeof t&&t);o||n.data(s.DATA_KEY,o=new s(this,r)),"string"==typeof t&&o[t](i)})}}(window.jQuery||window.Zepto),function(e){e.fn.addClassIncrement=function(t,i){var s=e(this);t||(t="num");for(var n=0;n<s.length;n++){var o=e(s[n]);o.data("number",n).addClass(t+"-"+n),i&&i(n,o)}return s},e.fn.flumen=function(t){function i(e,t){var i=m.map[e];t||(t=m.speed);var s=i.start;m.center&&(s-=m.half_width-i.half_width-m.margin),p=!0,h.trigger("flumen.beforechange",m),h.stop(!0).animate({scrollLeft:s},t,function(){h.trigger("flumen.afterchange",m)})}function s(){var e=h.scrollLeft();m.center&&(e+=m.half_width);for(var t in m.map){var i=m.map[t];if(e>=i.start&&e<=i.outerEnd)return i}return null}function n(){var e=h.scrollLeft(),t=[],i=e+m.width;for(var s in m.map){var n=m.map[s];e<n.end&&i>n.start&&t.push(n)}return t}function o(e){var t=m.map[e],i=t.start;m.center&&(i-=m.half_width-t.half_width-m.margin),h.scrollLeft(i)}function r(){h.trigger("flumen.beforeresize",m),m.width=h.width(),!m.cloned_left&&m.loop&&(m.cloned_left=m.children.clone(!0).addClass("clone clone-left"),m.cloned_right=m.children.clone(!0).addClass("clone clone-right"),h.prepend(m.cloned_left),h.append(m.cloned_right),m.children=h.children());var t=h.scrollLeft();h.scrollLeft(0);for(var i=0;i<m.children.length;i++){var s=e(m.children[i]),n=s.width(),o=s.outerWidth(!0),r=s.position().left,l={elem:s,width:n,start:m.center?r:r-m.margin,end:m.center?r+n:r+m.margin+n,outerEnd:r+o,outerWidth:o,id:i,num:i%m.items,half_width:n/2};s.hasClass("clone")?l.cloned=!0:m.orig_map[l.num]=l,m.map[i]=l}m.loop?(m.end_position=m.map[3*m.items-1].start+m.map[3*m.items-1].width-m.width-c,m.reset_left=m.map[m.items].start+c,m.reset_right=m.map[2*m.items-1].start+m.map[2*m.items-1].width-m.width-c):m.end_position=m.map[m.items-1].start+m.map[m.items-1].width-m.width,m.half_width=m.width/2,h.scrollLeft(t),e(this).trigger("flumen.afterresize",m)}function l(e){var t=h.scrollLeft();m.loop?(t<=c&&(h.trigger("flumen.start",m),h.scrollLeft(m.reset_left)),t>=m.end_position&&(h.trigger("flumen.end",m),h.scrollLeft(m.reset_right))):(0===t&&h.trigger("flumen.start",m),t>=m.end_position&&h.trigger("flumen.end",m));var i=s();!i||m.current&&m.current.id===i.id||(m.current=i,h.trigger("flumen.slide",i,m)),f&&clearTimeout(f),f=setTimeout(function(){h.trigger("flumen.stop",m),f=null},100)}function a(){return e.extend(m,t),u||h.addClass("no-flexbox"),m.fluid&&(h.kinetic(),h.mousewheel(function(e){h.scrollLeft(h.scrollLeft()+e.deltaX)})),m.children=h.children().addClass("flumen-slide"),m.original=m.children,m.margin&&m.original.css("margin","0px "+m.margin+"px"),m.items=m.children.length,m.children.addClassIncrement(),m.map={},m.orig_map={},e(window).resize(function(){d||(d=setTimeout(function(){clearTimeout(d),d=null,v.calc()},m.resize_timeout))}),v.calc(),m.start_num=0,m.loop&&(m.start_num=m.items),v.resetPosition(m.start_num),m.current=null,h.scroll(l),m.center||m.loop||h.trigger("scroll"),h.trigger("flumen.init",m),h}var h=e(this);if(h.length){h.addClass("flumen");var c=50,u="flex-shrink"in document.body.style,d=null,f=null,v={},m={loop:!0,center:!0,fluid:!0,arrows:!1,dots:!1,mousewheel:!1,speed:300,margin:0,resize_timeout:200,events:{}};m.elem=h;var p=!1;return v.goTo=i,v.getCurrentItem=s,v.resetPosition=o,v.calc=r,v.onscroll=l,h.on("flumen.goto",function(e,t){m.events.hasOwnProperty("goto")&&m.events["goto"](e,m),v.goTo(m.start_num+t-1)}),h.on("flumen.left",function(e){m.events.hasOwnProperty("left")&&m.events.left(e,m),v.goTo(m.current.id-1)}),h.on("flumen.recalc",function(e,t){v.calc()}),h.on("flumen.right",function(e){m.events.hasOwnProperty("right")&&m.events.right(e,m),v.goTo(m.current.id+1)}),h.on("flumen.slide",function(e,t){h.find(".flumen-current").removeClass("flumen-current"),t.elem.addClass("flumen-current"),m.events.hasOwnProperty("slide")&&m.events.slide(e,t,m)}),h.on("flumen.start",function(e,t){t.events.hasOwnProperty("start")&&t.events.start(e,t)}),h.on("flumen.end",function(e,t){t.events.hasOwnProperty("end")&&t.events.end(e,t)}),h.on("flumen.beforechange",function(e,t){t.events.hasOwnProperty("beforechange")&&t.events.beforechange(e,t)}),h.on("flumen.afterchange",function(e,t){t.events.hasOwnProperty("afterchange")&&t.events.afterchange(e,t)}),h.on("flumen.beforeresize",function(e,t){t.events.hasOwnProperty("beforeresize")&&t.events.beforeresize(e,t)}),h.on("flumen.afterresize",function(e,t){t.events.hasOwnProperty("afterresize")&&t.events.afterresize(e,t)}),h.on("flumen.init",function(e,t){t.events.hasOwnProperty("init")&&t.events.init(e,t)}),h.on("flumen.stop",function(e,t){t.visible=n(),h.find(".flumen-visible").removeClass("flumen-visible");for(var i=0;i<t.visible.length;i++)t.visible[i].elem.addClass("flumen-visible");t.events.hasOwnProperty("stop")&&t.events.stop(e,t),t.current.cloned&&p&&(p=!1,v.resetPosition(t.orig_map[t.current.num].id))}),h.on("flumen.remove",function(e,t){}),v.init=a,v.init()}}}(jQuery);