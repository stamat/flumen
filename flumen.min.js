/*!
 * Flumen MINIFIED v1.0.0
 *
 * License MIT
 *
 * http://stamat.github.io/flumen
 * Copyright 2017 Stamat
 */

!function(e){e.fn.addClassIncrement=function(t,n){var r=e(this);t||(t="num");for(var l=0;l<r.length;l++){var i=e(r[l]);i.data("number",l).addClass(t+"-"+l),n&&n(l,i)}return r},e.fn.flumen=function(t){function n(){s.width=i.width(),a||(s.cloned_left||(s.cloned_left=s.children.clone(!0).addClass("clone"),s.cloned_left.addClass("clone-left"),s.cloned_right=s.children.clone(!0).addClass("clone-right")),i.prepend(s.cloned_left),i.append(s.cloned_right),s.children=i.children(),a=!0);for(var t=0;t<s.children.length;t++){var n=e(s.children[t]),r=n.width(),l=n.outerWidth(!0),o=n.offset().left;s.map[t]={elem:n,width:r,start:o,end:o+r,outerEnd:o+l,outerWidth:l,num:t,half_width:r/2},n.hasClass("cloned")&&(s.map[t].cloned=!0)}s.end_position=s.map[3*s.items-1].start+s.map[3*s.items-1].width-s.width-d,s.reset_left=s.map[s.items].start+d,s.reset_right=s.map[2*s.items-1].start+s.map[2*s.items-1].width-s.width-d,s.half_width=s.width/2}function r(e,t){var n=s.map[e];f=e,c=s.current.num,t||(t=s.speed);var r=n.start;s.center&&(r-=s.half_width-n.half_width),o=!0,i.stop(!0).animate({scrollLeft:r},t,function(){o=!1})}function l(){var e=i.scrollLeft();s.center&&(e+=s.half_width);for(var t in s.map){var n=s.map[t];if(e>n.start&&e<n.outerEnd)return n}return null}var i=e(this),d=50,s={loop:!0,center:!0,fluid:!0,arrows:!1,dots:!1,mousewheel:!1,speed:300};e.extend(s,t),s.fluid&&(i.kinetic(),i.mousewheel(function(e){i.scrollLeft(i.scrollLeft()+e.deltaX)})),s.children=i.children(),s.original=s.children,s.items=s.children.length,s.children.addClassIncrement(),s.map={};var a=!1,o=!1,c=0,f=0;e(window).resize(n),n();var h=s.map[s.items],u=h.start;s.center&&(u-=s.half_width-h.half_width),i.scrollLeft(u),s.current=null,i.scroll(function(t){var n=i.scrollLeft();n<=d&&(e(this).trigger("flumen.start",s),i.scrollLeft(s.reset_left),o&&r(s.items+f,s.speed/2)),n>=s.end_position&&(e(this).trigger("flumen.end",s),i.scrollLeft(s.reset_right),o&&r(2*s.items-1));var a=l();!a||s.current&&s.current.num===a.num||(s.current=a,e(this).trigger("flumen.slide",s,a))}),i.on("flumen.goto",function(e,t){r(s.items+t-1)}),i.on("flumen.left",function(e){console.log(s.current.num-1),r(s.current.num-1)}),i.on("flumen.right",function(e){r(s.current.num+1)}),e(this).trigger("flumen.init",s)}}(jQuery);