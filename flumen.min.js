/*!
 * Flumen MINIFIED v1.0.2
 *
 * License MIT
 *
 * http://stamat.github.io/flumen
 * Copyright 2017 Stamat
 */

!function(e){e.fn.addClassIncrement=function(n,t){var r=e(this);n||(n="num");for(var i=0;i<r.length;i++){var l=e(r[i]);l.data("number",i).addClass(n+"-"+i),t&&t(i,l)}return r},e.fn.flumen=function(n){function t(e,n){var t=g.map[e];n||(n=g.speed);var r=t.start;g.center&&(r-=g.half_width-t.half_width-g.margin),p=!0,f.trigger("flumen.beforechange",g),f.stop(!0).animate({scrollLeft:r},n,function(){f.trigger("flumen.afterchange",g)})}function r(){var e=f.scrollLeft();g.center&&(e+=g.half_width);for(var n in g.map){var t=g.map[n];if(e>=t.start&&e<=t.outerEnd)return t}return null}function i(){var e=f.scrollLeft(),n=[],t=e+g.width;for(var r in g.map){var i=g.map[r];e<i.end&&t>i.start&&n.push(i)}return n}function l(e){var n=g.map[e],t=n.start;g.center&&(t-=g.half_width-n.half_width-g.margin),f.scrollLeft(t)}function o(){f.trigger("flumen.beforeresize",g),g.width=f.width(),!g.cloned_left&&g.loop&&(g.cloned_left=g.children.clone(!0).addClass("clone clone-left"),g.cloned_right=g.children.clone(!0).addClass("clone clone-right"),f.prepend(g.cloned_left),f.append(g.cloned_right),g.children=f.children());var n=f.scrollLeft();f.scrollLeft(0);for(var t=0;t<g.children.length;t++){var r=e(g.children[t]),i=r.width(),l=r.outerWidth(!0),o=r.position().left,s={elem:r,width:i,start:g.center?o:o-g.margin,end:g.center?o+i:o+g.margin+i,outerEnd:o+l,outerWidth:l,id:t,num:t%g.items,half_width:i/2};r.hasClass("clone")?s.cloned=!0:g.orig_map[s.num]=s,g.map[t]=s}g.loop?(g.end_position=g.map[3*g.items-1].start+g.map[3*g.items-1].width-g.width-u,g.reset_left=g.map[g.items].start+u,g.reset_right=g.map[2*g.items-1].start+g.map[2*g.items-1].width-g.width-u):g.end_position=g.map[g.items-1].start+g.map[g.items-1].width-g.width,g.half_width=g.width/2,f.scrollLeft(n),e(this).trigger("flumen.afterresize",g)}function s(e){var n=f.scrollLeft();g.loop?(n<=u&&(f.trigger("flumen.start",g),f.scrollLeft(g.reset_left)),n>=g.end_position&&(f.trigger("flumen.end",g),f.scrollLeft(g.reset_right))):(0===n&&f.trigger("flumen.start",g),n>=g.end_position&&f.trigger("flumen.end",g));var t=r();!t||g.current&&g.current.id===t.id||(g.current=t,f.trigger("flumen.slide",t,g)),d&&clearTimeout(d),d=setTimeout(function(){f.trigger("flumen.stop",g),d=null},100)}function a(){return e.extend(g,n),c||f.addClass("no-flexbox"),g.fluid&&(f.kinetic(),f.mousewheel(function(e){f.scrollLeft(f.scrollLeft()+e.deltaX)})),g.children=f.children().addClass("flumen-slide"),g.original=g.children,g.margin&&g.original.css("margin","0px "+g.margin+"px"),g.items=g.children.length,g.children.addClassIncrement(),g.map={},g.orig_map={},e(window).resize(function(){m||(m=setTimeout(function(){clearTimeout(m),m=null,h.calc()},g.resize_timeout))}),h.calc(),g.start_num=0,g.loop&&(g.start_num=g.items),h.resetPosition(g.start_num),g.current=null,f.scroll(s),g.center||g.loop||f.trigger("scroll"),f.trigger("flumen.init",g),f}var f=e(this);if(f.length){f.addClass("flumen");var u=50,c="flex-shrink"in document.body.style,m=null,d=null,h={},g={loop:!0,center:!0,fluid:!0,arrows:!1,dots:!1,mousewheel:!1,speed:300,margin:0,resize_timeout:200,events:{}};g.elem=f;var p=!1;return h.goTo=t,h.getCurrentItem=r,h.resetPosition=l,h.calc=o,h.onscroll=s,f.on("flumen.goto",function(e,n){g.events.hasOwnProperty("goto")&&g.events["goto"](e,g),h.goTo(g.start_num+n-1)}),f.on("flumen.left",function(e){g.events.hasOwnProperty("left")&&g.events.left(e,g),h.goTo(g.current.id-1)}),f.on("flumen.recalc",function(e,n){h.calc()}),f.on("flumen.right",function(e){g.events.hasOwnProperty("right")&&g.events.right(e,g),h.goTo(g.current.id+1)}),f.on("flumen.slide",function(e,n){f.find(".flumen-current").removeClass("flumen-current"),n.elem.addClass("flumen-current"),g.events.hasOwnProperty("slide")&&g.events.slide(e,n,g)}),f.on("flumen.start",function(e,n){n.events.hasOwnProperty("start")&&n.events.start(e,n)}),f.on("flumen.end",function(e,n){n.events.hasOwnProperty("end")&&n.events.end(e,n)}),f.on("flumen.beforechange",function(e,n){n.events.hasOwnProperty("beforechange")&&n.events.beforechange(e,n)}),f.on("flumen.afterchange",function(e,n){n.events.hasOwnProperty("afterchange")&&n.events.afterchange(e,n)}),f.on("flumen.beforeresize",function(e,n){n.events.hasOwnProperty("beforeresize")&&n.events.beforeresize(e,n)}),f.on("flumen.afterresize",function(e,n){n.events.hasOwnProperty("afterresize")&&n.events.afterresize(e,n)}),f.on("flumen.init",function(e,n){n.events.hasOwnProperty("init")&&n.events.init(e,n)}),f.on("flumen.stop",function(e,n){n.visible=i(),f.find(".flumen-visible").removeClass("flumen-visible");for(var t=0;t<n.visible.length;t++)n.visible[t].elem.addClass("flumen-visible");n.events.hasOwnProperty("stop")&&n.events.stop(e,n),n.current.cloned&&p&&(p=!1,h.resetPosition(n.orig_map[n.current.num].id))}),f.on("flumen.remove",function(e,n){}),h.init=a,h.init()}}}(jQuery);