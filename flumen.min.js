/*!
 * Flumen MINIFIED v1.0.1
 *
 * License MIT
 *
 * http://stamat.github.io/flumen
 * Copyright 2017 Stamat
 */

!function(e){e.fn.addClassIncrement=function(t,n){var r=e(this);t||(t="num");for(var i=0;i<r.length;i++){var l=e(r[i]);l.data("number",i).addClass(t+"-"+i),n&&n(i,l)}return r},e.fn.flumen=function(t){function n(t,n){var r=h.map[t];n||(n=h.speed);var i=r.start;h.center&&(i-=h.half_width-r.half_width-h.margin),g=!0,e(this).trigger("flumen.beforechange",h),a.stop(!0).animate({scrollLeft:i},n,function(){e(this).trigger("flumen.afterchange",h)})}function r(){var e=a.scrollLeft();h.center&&(e+=h.half_width);for(var t in h.map){var n=h.map[t];if(e>=n.start&&e<=n.outerEnd)return n}return null}function i(e){var t=h.map[e],n=t.start;h.center&&(n-=h.half_width-t.half_width-h.margin),a.scrollLeft(n)}function l(){e(this).trigger("flumen.beforeresize",h),h.width=a.width(),!h.cloned_left&&h.loop&&(h.cloned_left=h.children.clone(!0).addClass("clone clone-left"),h.cloned_right=h.children.clone(!0).addClass("clone clone-right"),a.prepend(h.cloned_left),a.append(h.cloned_right),h.children=a.children());var t=a.scrollLeft();a.scrollLeft(0);for(var n=0;n<h.children.length;n++){var r=e(h.children[n]),i=r.width(),l=r.outerWidth(!0),o=r.position().left,s={elem:r,width:i,start:h.center?o:o-h.margin,end:h.center?o+i:o+h.margin+i,outerEnd:o+l,outerWidth:l,id:n,num:n%h.items,half_width:i/2};r.hasClass("clone")?s.cloned=!0:h.orig_map[s.num]=s,h.map[n]=s}h.loop?(h.end_position=h.map[3*h.items-1].start+h.map[3*h.items-1].width-h.width-c,h.reset_left=h.map[h.items].start+c,h.reset_right=h.map[2*h.items-1].start+h.map[2*h.items-1].width-h.width-c):h.end_position=h.map[h.items-1].start+h.map[h.items-1].width-h.width,h.half_width=h.width/2,a.scrollLeft(t),e(this).trigger("flumen.afterresize",h)}function o(t){var n=a.scrollLeft();h.loop?(n<=c&&(e(this).trigger("flumen.start",h),a.scrollLeft(h.reset_left)),n>=h.end_position&&(e(this).trigger("flumen.end",h),a.scrollLeft(h.reset_right))):(0===n&&e(this).trigger("flumen.start",h),n>=h.end_position&&e(this).trigger("flumen.end",h));var i=r();!i||h.current&&h.current.id===i.id||(h.current=i,e(this).trigger("flumen.slide",i)),f&&clearTimeout(f),f=setTimeout(function(){a.trigger("flumen.stop",h),f=null},100)}function s(){e.extend(h,t),u||a.addClass("no-flexbox"),h.fluid&&(a.kinetic(),a.mousewheel(function(e){a.scrollLeft(a.scrollLeft()+e.deltaX)})),h.children=a.children().addClass("flumen-slide"),h.original=h.children,h.margin&&h.original.css("margin","0px "+h.margin+"px"),h.items=h.children.length,h.children.addClassIncrement(),h.map={},h.orig_map={},e(window).resize(function(){d||(d=setTimeout(function(){clearTimeout(d),d=null,m.calc()},h.resize_timeout))}),m.calc(),h.start_num=0,h.loop&&(h.start_num=h.items),m.resetPosition(h.start_num),h.current=null,a.scroll(o),h.center||h.loop||a.trigger("scroll")}var a=e(this).addClass("flumen"),c=50,u="flex-shrink"in document.body.style,d=null,f=null,m={},h={loop:!0,center:!0,fluid:!0,arrows:!1,dots:!1,mousewheel:!1,speed:300,margin:0,resize_timeout:200},g=!1;m.goTo=n,m.getCurrentItem=r,m.resetPosition=i,m.calc=l,m.onscroll=o,a.on("flumen.goto",function(e,t){m.goTo(h.start_num+t-1)}),a.on("flumen.left",function(e){m.goTo(h.current.id-1)}),a.on("flumen.recalc",function(e,t){m.calc()}),a.on("flumen.right",function(e){m.goTo(h.current.id+1)}),a.on("flumen.slide",function(e,t){console.log(t.num)}),a.on("flumen.stop",function(e,t){t.current.cloned&&g&&(g=!1,m.resetPosition(t.orig_map[t.current.num].id))}),a.on("flumen.remove",function(e,t){}),m.init=s,m.init(),e(this).trigger("flumen.init",h)}}(jQuery);